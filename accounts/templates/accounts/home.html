<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>TEST FITECH — Главная</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: Inter, Roboto, Arial, sans-serif; }
    body { background:#f6f7fb; color:#222; line-height:1.4; }

    .header {
      display:flex; justify-content:space-between; align-items:center;
      padding:18px 24px; background:#fff; border-bottom:1px solid #e6e9ef;
      box-shadow: 0 1px 0 rgba(0,0,0,0.02);
    }
    .logo { font-weight:700; color:#0b66ff; font-size:20px; letter-spacing:0.4px; }
    .header .profile a { text-decoration:none; color:#0b66ff; font-weight:600; }

    .page { max-width:1100px; margin:28px auto; padding:0 16px; }
    .top-row { display:flex; gap:20px; margin-bottom:20px; align-items:stretch; }

    .balance {
      background:#fff; padding:20px; border-radius:8px; border:1px solid #e6e9ef;
      min-width:220px; flex:0 0 300px; box-shadow: 0 6px 18px rgba(11,102,255,0.03);
    }
    .balance h2 { font-size:16px; margin-bottom:8px; color:#444; }
    .balance .amount { font-size:28px; font-weight:700; color:#0b66ff; margin-top:6px; }
    .balance .small { color:#7b869a; font-size:13px; margin-top:6px; }

    .content { flex:1; display:grid; grid-template-columns: 1fr 360px; gap:20px; align-items:start; }
    .card {
      background:#fff; padding:18px; border-radius:8px; border:1px solid #e6e9ef;
      box-shadow: 0 6px 18px rgba(17,24,39,0.02);
    }

    .history h3 { margin-bottom:12px; font-size:16px; color:#333; }
    .tx-table { width:100%; border-collapse:collapse; font-size:14px; }
    .tx-table thead th {
      text-align:left; padding:10px 8px; color:#6b7280; font-weight:600; font-size:13px;
      border-bottom:1px solid #f0f1f5;
    }
    .tx-table tbody td { padding:10px 8px; border-bottom:1px dashed #f0f1f5; color:#222; }
    .tx-in { color:#059669; font-weight:600; }
    .tx-out { color:#ef4444; font-weight:600; }
    .tx-empty { padding:16px; color:#6b7280; }

    .transfer h3 { margin-bottom:12px; font-size:16px; color:#333; }
    .form-row { margin-bottom:12px; }
    label { display:block; font-size:13px; margin-bottom:6px; color:#475569; }
    input[type="text"], input[type="number"] {
      width:100%; padding:10px 12px; border:1px solid #e6e9ef; border-radius:6px;
      background:#fbfdff; outline: none;
    }
    .btn {
      display:inline-block; padding:10px 14px; background:#0b66ff; color:#fff;
      border-radius:8px; border:none; font-weight:700; cursor:pointer;
      text-align:center;
    }

    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 20px; /* расстояние между карточками */
    }

    @media (max-width:880px) {
      .content { grid-template-columns: 1fr; }
      .top-row { flex-direction:column; }
      .balance { flex:1 1 auto; min-width:0; }
    }
    .logo a {
      text-decoration: none; /* убирает подчёркивание */
      color: inherit;        /* наследует цвет от родителя */
      font-weight: bold;     /* оставляем жирным, если нужно */
    }
  </style>
</head>
<body>

  <header class="header">
    <div class="logo">
      <a href="{% url 'home' %}">TEST FINTECH</a>
    </div>
    <div class="profile">
      {% if user.is_authenticated %}
        <span>{{ user.username }}</span>
        &nbsp; | &nbsp;
        <a href="{% url 'logout' %}">Выйти</a>
      {% else %}
        <a href="{% url 'login' %}">Войти</a>
      {% endif %}
    </div>
  </header>

  <main class="page">
    <div class="top-row">
      <div class="balance card">
        <h2>Мой баланс</h2>
        <div class="amount">{{ user.balance|default:"0.00" }}</div>
        <div class="small">Последнее обновление: {{ user.last_login|date:"d.m.Y H:i" }}</div>
      </div>
      <div style="flex:1"></div>
    </div>

    <div class="content">
      <!-- История переводов -->
      <section class="history card">
        <h3>История переводов</h3>
        {% if transactions %}
          <table class="tx-table">
            <thead>
              <tr><th>Дата</th><th>Контрагент</th><th>Сумма</th></tr>
            </thead>
            <tbody>
              {% for item in transactions %}
                <tr>
                  <td>{{ item.tx.created_at|date:"d.m.Y H:i" }}</td>
                  <td>
                    {% if item.tx.receiver_hash == user.user_hash %}
                      От: {{ item.sender_username }}
                    {% else %}
                      Кому: {{ item.receiver_username }}
                    {% endif %}
                  </td>
                  <td>
                    {% if item.tx.receiver_hash == user.user_hash %}
                      <span class="tx-in">+{{ item.tx.value }}</span>
                    {% else %}
                      <span class="tx-out">-{{ item.tx.value }}</span>
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <div class="tx-empty">Транзакций пока нет.</div>
        {% endif %}
      </section>

      <!-- Правая колонка -->
      <div class="sidebar">
        <aside class="transfer card">
          <h3>Сделать перевод</h3>
          <a href="{% url 'transaction' %}" class="btn">Перейти к переводу</a>
        </aside>
    
        <aside class="transfer card">
          <h3>Получить кредит</h3>
          <a href="{% url 'credit' %}" class="btn">Оформить кредит</a>
        </aside>
    
        <aside class="transfer card">
          <h3>Мои кредиты</h3>
          <a href="{% url 'credits-list' %}" class="btn">Посмотреть кредиты</a>
        </aside>
      </div>
    </div>
  </main>

</body>
</html>